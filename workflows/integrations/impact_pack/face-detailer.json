{"id":"4192ee85-aca6-4ee3-8a42-a29fa20e2315","revision":0,"last_node_id":21,"last_link_id":40,"nodes":[{"id":5,"type":"EmptyLatentImage","pos":[100,130],"size":[315,106],"flags":{},"order":0,"mode":0,"inputs":[{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":null},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":null},{"localized_name":"batch_size","name":"batch_size","type":"INT","widget":{"name":"batch_size"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","slot_index":0,"links":[2]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.39","Node name for S&R":"EmptyLatentImage"},"widgets_values":[832,1216,1]},{"id":12,"type":"TiledAttentionCouple","pos":[600,130],"size":[270,122],"flags":{},"order":4,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":20},{"localized_name":"clip","name":"clip","type":"CLIP","link":21},{"localized_name":"config","name":"config","type":"TILED_CONFIG","link":22},{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":null},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":null}],"outputs":[{"localized_name":"model","name":"model","type":"MODEL","links":[19]},{"localized_name":"positive","name":"positive","type":"CONDITIONING","links":[17,28]},{"localized_name":"negative","name":"negative","type":"CONDITIONING","links":[18,29]}],"properties":{"cnr_id":"comfyui-tiledattentioncouple","ver":"90aab16ea14cae473b70b2bed6b171f122e33e97","Node name for S&R":"TiledAttentionCouple"},"widgets_values":[832,1216]},{"id":16,"type":"UltralyticsDetectorProvider","pos":[100,696],"size":[270,78],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"model_name","name":"model_name","type":"COMBO","widget":{"name":"model_name"},"link":null}],"outputs":[{"localized_name":"BBOX_DETECTOR","name":"BBOX_DETECTOR","type":"BBOX_DETECTOR","links":[34]},{"localized_name":"SEGM_DETECTOR","name":"SEGM_DETECTOR","type":"SEGM_DETECTOR","links":null}],"properties":{"cnr_id":"comfyui-impact-subpack","ver":"1.3.2","Node name for S&R":"UltralyticsDetectorProvider"},"widgets_values":["bbox/face_yolov8m.pt"]},{"id":8,"type":"VAEDecode","pos":[1434.5035400390625,130],"size":[210,46],"flags":{},"order":7,"mode":0,"inputs":[{"localized_name":"samples","name":"samples","type":"LATENT","link":7},{"localized_name":"vae","name":"vae","type":"VAE","link":8}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[32,35]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.39","Node name for S&R":"VAEDecode"},"widgets_values":[]},{"id":17,"type":"PreviewImage","pos":[1744.5035400390625,1220],"size":[140,246],"flags":{},"order":9,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":35}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.39","Node name for S&R":"PreviewImage"},"widgets_values":[]},{"id":9,"type":"SaveImage","pos":[2244.50341796875,130],"size":[210,270],"flags":{},"order":10,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":33},{"localized_name":"filename_prefix","name":"filename_prefix","type":"STRING","widget":{"name":"filename_prefix"},"link":null}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.39"},"widgets_values":["ComfyUI"]},{"id":4,"type":"CheckpointLoaderSimple","pos":[100,904],"size":[315,98],"flags":{},"order":2,"mode":0,"inputs":[{"localized_name":"ckpt_name","name":"ckpt_name","type":"COMBO","widget":{"name":"ckpt_name"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","slot_index":0,"links":[20,23,40]},{"localized_name":"CLIP","name":"CLIP","type":"CLIP","slot_index":1,"links":[21,24,30]},{"localized_name":"VAE","name":"VAE","type":"VAE","slot_index":2,"links":[8,31]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.39","Node name for S&R":"CheckpointLoaderSimple"},"widgets_values":["NanoMix_v13.safetensors"]},{"id":15,"type":"TiledAttentionCoupleImpactPackDetailer","pos":[600,382],"size":[319.5035095214844,66],"flags":{},"order":5,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":23},{"localized_name":"clip","name":"clip","type":"CLIP","link":24},{"localized_name":"config","name":"config","type":"TILED_CONFIG","link":25}],"outputs":[{"localized_name":"detailer_hook","name":"detailer_hook","type":"DETAILER_HOOK","links":[26]}],"properties":{"cnr_id":"comfyui-tiledattentioncouple","ver":"90aab16ea14cae473b70b2bed6b171f122e33e97","Node name for S&R":"TiledAttentionCoupleImpactPackDetailer"},"widgets_values":[]},{"id":3,"type":"KSampler","pos":[1019.5035400390625,130],"size":[315,262],"flags":{},"order":6,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":19},{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":17},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":18},{"localized_name":"latent_image","name":"latent_image","type":"LATENT","link":2},{"localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":null},{"localized_name":"steps","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"cfg","name":"cfg","type":"FLOAT","widget":{"name":"cfg"},"link":null},{"localized_name":"sampler_name","name":"sampler_name","type":"COMBO","widget":{"name":"sampler_name"},"link":null},{"localized_name":"scheduler","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null},{"localized_name":"denoise","name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","slot_index":0,"links":[7]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.39","Node name for S&R":"KSampler"},"widgets_values":[594426316602234,"randomize",30,5,"dpmpp_2m","karras",1]},{"id":14,"type":"FaceDetailer","pos":[1744.5035400390625,130],"size":[400,960],"flags":{},"order":8,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":32},{"localized_name":"model","name":"model","type":"MODEL","link":40},{"localized_name":"clip","name":"clip","type":"CLIP","link":30},{"localized_name":"vae","name":"vae","type":"VAE","link":31},{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":28},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":29},{"localized_name":"bbox_detector","name":"bbox_detector","type":"BBOX_DETECTOR","link":34},{"localized_name":"sam_model_opt","name":"sam_model_opt","shape":7,"type":"SAM_MODEL","link":null},{"localized_name":"segm_detector_opt","name":"segm_detector_opt","shape":7,"type":"SEGM_DETECTOR","link":null},{"localized_name":"detailer_hook","name":"detailer_hook","shape":7,"type":"DETAILER_HOOK","link":26},{"localized_name":"scheduler_func_opt","name":"scheduler_func_opt","shape":7,"type":"SCHEDULER_FUNC","link":null},{"localized_name":"guide_size","name":"guide_size","type":"FLOAT","widget":{"name":"guide_size"},"link":null},{"localized_name":"guide_size_for","name":"guide_size_for","type":"BOOLEAN","widget":{"name":"guide_size_for"},"link":null},{"localized_name":"max_size","name":"max_size","type":"FLOAT","widget":{"name":"max_size"},"link":null},{"localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":null},{"localized_name":"steps","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"cfg","name":"cfg","type":"FLOAT","widget":{"name":"cfg"},"link":null},{"localized_name":"sampler_name","name":"sampler_name","type":"COMBO","widget":{"name":"sampler_name"},"link":null},{"localized_name":"scheduler","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null},{"localized_name":"denoise","name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"link":null},{"localized_name":"feather","name":"feather","type":"INT","widget":{"name":"feather"},"link":null},{"localized_name":"noise_mask","name":"noise_mask","type":"BOOLEAN","widget":{"name":"noise_mask"},"link":null},{"localized_name":"force_inpaint","name":"force_inpaint","type":"BOOLEAN","widget":{"name":"force_inpaint"},"link":null},{"localized_name":"bbox_threshold","name":"bbox_threshold","type":"FLOAT","widget":{"name":"bbox_threshold"},"link":null},{"localized_name":"bbox_dilation","name":"bbox_dilation","type":"INT","widget":{"name":"bbox_dilation"},"link":null},{"localized_name":"bbox_crop_factor","name":"bbox_crop_factor","type":"FLOAT","widget":{"name":"bbox_crop_factor"},"link":null},{"localized_name":"sam_detection_hint","name":"sam_detection_hint","type":"COMBO","widget":{"name":"sam_detection_hint"},"link":null},{"localized_name":"sam_dilation","name":"sam_dilation","type":"INT","widget":{"name":"sam_dilation"},"link":null},{"localized_name":"sam_threshold","name":"sam_threshold","type":"FLOAT","widget":{"name":"sam_threshold"},"link":null},{"localized_name":"sam_bbox_expansion","name":"sam_bbox_expansion","type":"INT","widget":{"name":"sam_bbox_expansion"},"link":null},{"localized_name":"sam_mask_hint_threshold","name":"sam_mask_hint_threshold","type":"FLOAT","widget":{"name":"sam_mask_hint_threshold"},"link":null},{"localized_name":"sam_mask_hint_use_negative","name":"sam_mask_hint_use_negative","type":"COMBO","widget":{"name":"sam_mask_hint_use_negative"},"link":null},{"localized_name":"drop_size","name":"drop_size","type":"INT","widget":{"name":"drop_size"},"link":null},{"localized_name":"wildcard","name":"wildcard","type":"STRING","widget":{"name":"wildcard"},"link":null},{"localized_name":"cycle","name":"cycle","type":"INT","widget":{"name":"cycle"},"link":null},{"localized_name":"inpaint_model","name":"inpaint_model","shape":7,"type":"BOOLEAN","widget":{"name":"inpaint_model"},"link":null},{"localized_name":"noise_mask_feather","name":"noise_mask_feather","shape":7,"type":"INT","widget":{"name":"noise_mask_feather"},"link":null},{"localized_name":"tiled_encode","name":"tiled_encode","shape":7,"type":"BOOLEAN","widget":{"name":"tiled_encode"},"link":null},{"localized_name":"tiled_decode","name":"tiled_decode","shape":7,"type":"BOOLEAN","widget":{"name":"tiled_decode"},"link":null}],"outputs":[{"localized_name":"image","name":"image","type":"IMAGE","links":[33]},{"localized_name":"cropped_refined","name":"cropped_refined","shape":6,"type":"IMAGE","links":[]},{"localized_name":"cropped_enhanced_alpha","name":"cropped_enhanced_alpha","shape":6,"type":"IMAGE","links":null},{"localized_name":"mask","name":"mask","type":"MASK","links":null},{"localized_name":"detailer_pipe","name":"detailer_pipe","type":"DETAILER_PIPE","links":null},{"localized_name":"cnet_images","name":"cnet_images","shape":6,"type":"IMAGE","links":null}],"properties":{"cnr_id":"comfyui-impact-pack","ver":"8.15.3","Node name for S&R":"FaceDetailer"},"widgets_values":[512,true,1024,688472838075,"fixed",12,3.5,"dpmpp_2m","karras",0.5000000000000001,5,true,true,0.5000000000000001,10,1.5,"center-1",0,0.93,0,0.7,"False",10,"",1,false,20,false,false]},{"id":13,"type":"TiledAttentionCouplePrompt","pos":[100,366],"size":[400,200],"flags":{},"order":3,"mode":0,"inputs":[{"localized_name":"division","name":"division","type":"STRING","widget":{"name":"division"},"link":null},{"localized_name":"orientation","name":"orientation","type":"COMBO","widget":{"name":"orientation"},"link":null},{"localized_name":"positive","name":"positive","type":"STRING","widget":{"name":"positive"},"link":null},{"localized_name":"negative","name":"negative","type":"STRING","widget":{"name":"negative"},"link":null}],"outputs":[{"localized_name":"config","name":"config","type":"TILED_CONFIG","links":[22,25]}],"properties":{"cnr_id":"comfyui-tiledattentioncouple","ver":"90aab16ea14cae473b70b2bed6b171f122e33e97","Node name for S&R":"TiledAttentionCouplePrompt"},"widgets_values":["1,1","horizontal","2girls,\nmaid, cafe,\nmasterpiece, best quality,\nBREAK\ntakamachi nanoha, short twintails, \nlight smile,\nBREAK\nfate testarossa, straight hair, \nnose blush, ","lowres, (bad quality, worst quality:1.2),\nbad anatomy, blurry, jpeg artifacts, poorly drawn, ugly, sketch,\n(censor), copyright notice, simple background, transparent background, watermark,"]}],"links":[[2,5,0,3,3,"LATENT"],[7,3,0,8,0,"LATENT"],[8,4,2,8,1,"VAE"],[17,12,1,3,1,"CONDITIONING"],[18,12,2,3,2,"CONDITIONING"],[19,12,0,3,0,"MODEL"],[20,4,0,12,0,"MODEL"],[21,4,1,12,1,"CLIP"],[22,13,0,12,2,"TILED_CONFIG"],[23,4,0,15,0,"MODEL"],[24,4,1,15,1,"CLIP"],[25,13,0,15,2,"TILED_CONFIG"],[26,15,0,14,9,"DETAILER_HOOK"],[28,12,1,14,4,"CONDITIONING"],[29,12,2,14,5,"CONDITIONING"],[30,4,1,14,2,"CLIP"],[31,4,2,14,3,"VAE"],[32,8,0,14,0,"IMAGE"],[33,14,0,9,0,"IMAGE"],[34,16,0,14,6,"BBOX_DETECTOR"],[35,8,0,17,0,"IMAGE"],[40,4,0,14,1,"MODEL"]],"groups":[],"config":{},"extra":{"ds":{"scale":1.2100000000000002,"offset":[33.021413676179066,-96.87581102909488]},"frontendVersion":"1.20.7"},"version":0.4}